<!-- filename: addStudent.ejs-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Add a Student</title>
    <%- include('../partials/_method_header.ejs') %>
</head>
<body>
   <!-- Responsive navbar-->
   <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <%- include('../partials/_navbar.ejs') %>
    </nav>
  <div class="text-center">
    <h1>Add a Student</h1>
      <!-- User Input Fields-->
      <label for="first_name">First Name:</label>
      <input type="text" id="first_name" name="first_name"><br><br>

      <label for="last_name">Last Name:</label>
      <input type="text" id="last_name" name="last_name"><br><br>

      <label for="gpa">GPA:</label>
      <input type="text" id="gpa" name="gpa"><br><br>

      <label for="enrolled">Enrolled?</label>
      <select id="enrolled" name="enrolled"><br><br>
          <option value="true">Yes</option>
          <option value="false">No</option>
      </select><br><br>
      <!-- Submit POST request when user clicks button-->
      <button onclick="addStudent()">Add Student</button>
  </div>
    <br>
    <br>
    <div id="mydiv" name="mydiv" class="text-center "></div>
    <script>

        function addStudent() {
        // assign variables for parameter inputs
        var first_name_val = $("#first_name").val();
        var last_name_val = $("#last_name").val();
        var gpa_val = $("#gpa").val();
        var enrolled_val = $("#enrolled").val();
        
        $.ajax({
            // where is this request
            url: "http://localhost:5678/students",
            type: "post",
            data: { 
            first_name: first_name_val,
            last_name: last_name_val, 
            gpa: gpa_val, 
            enrolled: enrolled_val
            },
            success: function(response) {
              $("#mydiv").text("Student created with ID: " + JSON.stringify(response.insertedId));
            },
            error: function(xhr) {
              $("#mydiv").text('error: ' + xhr);
            }
        });
    }
    
  </script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
</body>
</html>